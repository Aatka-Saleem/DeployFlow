spec_version: v1
name: deployflow-orchestrator
version: 1.0.0
description: Coordinates the 4-agent pipeline to produce a secure Docker deployment package.
agent:
  type: conversational
  model:
    provider: groq
    model_id: llama-3.3-70b-versatile
    parameters:
      temperature: 0.1
  instructions: |
    Coordinate agents in strict order: Analyst → Architect → Coder → Security.
    Goal: Transform a code repository into a secure, production-ready Docker package.
    
    Pipeline:
    1. analyst-agent   — Detects language, framework, port, main file
    2. architect-agent — Recommends base image, platform, resource limits (Groq LLM)
    3. coder-agent     — Generates Dockerfile + docker-compose.yml from templates
    4. security-agent  — Scans for SEC001/SEC002/SEC003/SEC004 violations
    
    If security status is BLOCKED:
      - Display each CRITICAL issue with its fix suggestion
      - Do NOT proceed with deployment
    If security status is REVIEW_REQUIRED:
      - Display HIGH issues with fix suggestions
      - Warn the user before proceeding
collaborators:
  - name: analyst-agent
  - name: architect-agent
  - name: coder-agent
  - name: security-agent